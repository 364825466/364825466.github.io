<!DOCTYPE html>
<html 
  lang="zh-CN" > <head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <meta name="description" content="Hexo">
  <link rel="icon" href="https://demo.theme-kaze.top/img/Kaze.png">
  <title>MongoDB配置</title>
  
  
  <meta property="og:title" content="MongoDB配置">
  
  
  <meta property="og:url" content="http://www.codekop.com/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/index.html">
  
  
  <meta property="og:img" content="/blogImg/MongoDB配置/mm.jpg">
  
  
  <meta property="og:img" content="&lt;h1 id=&#34;MongoDB安装及配置&#34;&gt;&lt;a href=&#34;#MongoDB安装及配置&#34; class=&#34;headerlink&#34; title=&#34;MongoDB安装及配置&#34;&gt;&lt;/a&gt;MongoDB安装及配置&lt;/h1&gt;">
  
  
  <meta property="og:type" content="article">
  <meta property="og:article:published_time" content="2019-10-15">
  <meta property="og:article:modified_time" content="2021-06-07">
  <meta property="og:article:author" content="刘一峰">
  
  
  <meta property="og:article:tag" content="技术分享">
  
  <meta property="og:article:tag" content="MongoDB">
  
  
  
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  <!-- TODO: New Prefetch Plan -->
  
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
  <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


  <body>
    <div class="wrapper">
       <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="https://demo.theme-kaze.top/img/Kaze.png" alt="logo">
      
      <span class="navbar-logo-dsc">CodeKop的博客</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">
    
    首页
    
    </a>
    
    <a href="/archives" class="navbar-menu-item">
    
    归档
    
    </a>
    
    <a href="/tags" class="navbar-menu-item">
    
    标签
    
    </a>
    
    <a href="/categories" class="navbar-menu-item">
    
    分类
    
    </a>
    
    <a href="/about" class="navbar-menu-item">
    
    关于
    
    </a>
    
    <a href="/links" class="navbar-menu-item">
    
    友链
    
    </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
    <a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size: 1.2rem; font-weight: 400;"></i></a>
  </div>
</nav> 
      <div id="local-search" style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="请输入搜索内容..."
        />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<div class="image-wrapper">
  <img src="/blogImg/MongoDB配置/mm.jpg" data-src="/blogImg/MongoDB配置/mm.jpg"
    srcset="data:image/svg+xml,%3Csvg%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20viewBox=&#39;0%200%20300%20300&#39;%3E%3C/svg%3E"
    class="image lozad"
    alt="thumbnail"
  >
</div>

<article class="card card-content">
  <header>
    <h1 class="post-title">
      MongoDB配置
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2019-10-15T10:27:42.000Z">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2019-10-15</span>
    </time>
    
    
    <span class="dot"></span>
    <span>2k 字</span>
    
  </div>
  
  <div class="post-meta post-show-meta" style="margin-top: -10px;">
    <div style="display: flex; align-items: center;">
      <i class="iconfont icon-biaoqian" style="margin-right: 2px; font-size: 1.15rem;"></i>
      
      
        <a href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/" class="post-meta-link">技术分享</a>
      
      
      <span class="dot"></span>
      
        <a href="/tags/MongoDB/" class="post-meta-link">MongoDB</a>
      
    </div>
  </div>
  
  </header>
  <div id="section" class="post-content">
    <h1 id="MongoDB安装及配置"><a href="#MongoDB安装及配置" class="headerlink" title="MongoDB安装及配置"></a>MongoDB安装及配置</h1><span id="more"></span>

<h2 id="mongo安装"><a href="#mongo安装" class="headerlink" title="mongo安装"></a>mongo安装</h2><p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/1-next.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/1-next.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/2-%E5%8B%BE%E9%80%89-next.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/2-%E5%8B%BE%E9%80%89-next.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/3-custom.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/3-custom.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/4-1%E6%8C%87%E5%AE%9A%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE-next.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/4-1%E6%8C%87%E5%AE%9A%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE-next.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/4-2%E9%80%89%E6%8B%A9%E4%BD%8D%E7%BD%AE.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/4-2%E9%80%89%E6%8B%A9%E4%BD%8D%E7%BD%AE.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/4-3%E4%B8%8B%E4%B8%80%E6%AD%A5.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/4-3%E4%B8%8B%E4%B8%80%E6%AD%A5.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/5-%E6%9C%8D%E5%8A%A1%E9%80%89%E6%8B%A9%E4%BB%8B%E7%BB%8D.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/5-%E6%9C%8D%E5%8A%A1%E9%80%89%E6%8B%A9%E4%BB%8B%E7%BB%8D.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/5-%E6%9C%8D%E5%8A%A1%E9%80%89%E6%8B%A9-%E9%BB%98%E8%AE%A4%E9%80%89%E6%8B%A9%EF%BC%8C%E4%B8%8D%E8%A6%81%E6%94%B9%E5%8F%98.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/5-%E6%9C%8D%E5%8A%A1%E9%80%89%E6%8B%A9-%E9%BB%98%E8%AE%A4%E9%80%89%E6%8B%A9%EF%BC%8C%E4%B8%8D%E8%A6%81%E6%94%B9%E5%8F%98.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/6-next.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/6-next.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/7-install.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/7-install.png"></p>
<h2 id="mongo配置"><a href="#mongo配置" class="headerlink" title="mongo配置"></a>mongo配置</h2><pre class="highlight"><span class="line">1.将mongodb的bin目录配置到环境变量中</span><br><span class="line">进入cmd命令行，输入mongod --help测试是否成功，如果输出一串相关命令提示信息，表示成功</span><br><span class="line"></span><br><span class="line">d:\mongoDB\bin&gt;D:\mongoDB\bin\mongod.exe --config D:\mongoDB</span><br><span class="line">\mongo.config --install</span><br><span class="line">2.安装完毕之后，data目录即为数据库（db）目录，log目录即为日志目录，网上很多教程中，会新建db与log目录，不需要再做</span><br><span class="line"></span><br><span class="line">3..浏览器中输入http://localhost:27017/ 页面输出</span><br><span class="line">It looks like you are trying to access MongoDB over HTTP on the native driver port.</span><br><span class="line"></span><br><span class="line">4.常用命令</span><br><span class="line">net start MongoDB开启服务 </span><br><span class="line">net stop MongoDB关闭服务</span><br><span class="line">5.mongo shell</span><br><span class="line">命令行（管理员）中输入mongo</span><br><span class="line">show dbs 显示当前所有的数据库</span><br><span class="line">use dbname  切换数据库</span><br><span class="line">db 显示当前使用的数据库</span><br><span class="line">show collections 显示数据库中所有的集合</span><br><span class="line">db.&lt;collection&gt;.insert(doc)网数据库插入文档</span><br><span class="line">db.students.insert(&#123;id:&quot;001&quot;,name:&quot;Lily&quot;&#125;)</span><br><span class="line">db.students.find() 查询当前集合中所有的文档</span><br><span class="line"></span><br><span class="line">d:\mongoDB\bin&gt;D:\mongoDB\bin\mongod.exe --config D:\mongoDB\mongo.config --install</span><br><span class="line"></span><br><span class="line">d:\mongoDB\bin&gt;D:\mongoDB\bin\mongod.exe --dbpath D:\mongoDB\data\db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre>



<h3 id="正常执行步骤"><a href="#正常执行步骤" class="headerlink" title="正常执行步骤"></a>正常执行步骤</h3><p><strong>第一步</strong></p>
<p>​    创建几个文件夹具体如下：在根目录的data文件夹下创建数据库路径（db目录）、日志路径（log目录）</p>
<p><strong>第二步：配置环境变量</strong></p>
<p><strong>在cmd中方便访问mongo</strong></p>
<p> 因为每次我们启动MongoDB服务的时候</p>
<p>都需要在cmd中切换到MongoDB所在路径，然后执行 net start mongodb 命令来开启服务。</p>
<p>为了解决这个问题我们可以将MongoDB配置到系统环境变量中。 </p>
<p>下次在开机的时候可以直接打开cmd或者以管理员身份打开输入 net start mongodb 命令，无需切换到MongoDB所在路径进行启动。</p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/05.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/05.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/06.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/06.png"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/07.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/07.png"></p>
<p><strong>第三步</strong></p>
<p>安装路径下创建配置文件mongo.config，文件内容如下：</p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/03.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/03.png"></p>
<p>#数据库路径<br>dbpath = D:\MongoDB\data<br>#日志输出文件路径<br>logpath = D:\MongoDB\log\mongodb.log<br>#错误日志采用追加模式，配置这个选项后mongodb的日志会追加到现有的日志文件，而不是从新创建一个新文件<br>logappend = true<br>#启用日志文件，默认启用<br>journal = true<br>#这个选项可以过滤掉一些无用的日志信息，若需要调试使用请设置为false<br>quiet = true<br>#端口号 默认为27017<br>port = 27017</p>
<pre class="highlight"><span class="line">dbpath=D:\mongodb\data\db</span><br><span class="line"></span><br><span class="line">logpath=D:\mongodb\data\log\mongodb.log</span><br><span class="line">logappend=true</span><br><span class="line">journal=true</span><br><span class="line">quiet=true</span><br><span class="line">port=27017</span><br></pre>

<p><strong>第四步</strong></p>
<p>打开cmd进入bin目录（管理员模式开启，为了避免错误发生）</p>
<p><strong>cd /d d:\mongoDB\bin</strong></p>
<p><strong>mongod -dbpath D:\mongodb\data\db</strong></p>
<p>mongodb默认连接端口27017，如果出现如图的情况，在浏览器访问：<a target="_blank" rel="noopener" href="http://localhost:27017/">http://localhost:27017</a></p>
<p>成功之后关闭此命令行，即关闭mongodb服务</p>
<p><img src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/Users/CodeKop/Desktop/实训/技术分享/MongoDB-刘雨竹/MongoDB-刘雨竹/img/08.png" alt="1566734777848" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/Users/CodeKop/Desktop/实训/技术分享/MongoDB-刘雨竹/MongoDB-刘雨竹/img/08.png" class="lozad post-image"></p>
<p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/04.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/04.png"></p>
<p><strong>第五步</strong></p>
<p>在bin目录下执行</p>
<p><strong>mongod -dbpath “C:\mongodb\data\db” -logpath “C:\mongodb\data\log\mongodb.log” -install -        serviceName “MongoDB”</strong></p>
<p>（把db的路径和log的路径装配到MongoDB Service服务中）</p>
<p><strong>第六步</strong></p>
<p>在bin目录下执行</p>
<p><strong>mongod –config “C:\mongodb\mongo.config” –install –serviceName “MongoDB”</strong></p>
<p>（把配置文件装配到MongoDB Service服务中）</p>
<p><strong>第七步：连接</strong></p>
<p>执行 <strong>net start mongodb</strong></p>
<h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h3><p>如果命令出现重名现象，即自动生成了响应时间戳的log文件</p>
<p>则通过  <strong>sc delete MongoDB</strong></p>
<p>删除服务并删除所有log文件，然后重新从第五步执行一遍</p>
<h4 id="错误-5"><a href="#错误-5" class="headerlink" title="错误 5"></a><strong>错误 5</strong></h4><p>发生系统错误 5 </p>
<p>拒绝访问</p>
<p> 是因为没有使用<strong>管理员模式</strong>打开cmd</p>
<h4 id="错误-1058"><a href="#错误-1058" class="headerlink" title="错误 1058"></a><strong>错误 1058</strong></h4><p>出现1058 错误 是因为配置文件出错，如遇到1058错误</p>
<ol>
<li>删除服务 <strong>sc delete MongoDB</strong></li>
<li>检查配置文件，是否有多余的空格，空白，路径是否正确，单词拼写是否正确，然后保存</li>
<li>重新执行以上步骤，将相应的文件配置到mongodb服务中</li>
</ol>
<h4 id="其它错误"><a href="#其它错误" class="headerlink" title="其它错误"></a><strong>其它错误</strong></h4><p>同样重新配置服务，因为有时候服务默认配置路径错误，要删除后再配置，具体路径可以右键计算机，选择管理，点击服务，找到mongodb右键属性即可。安装的所有错误基本都是路径错误，按照本机情况重新检查一遍即可。</p>
<p>重新配置的具体操作界面如下：<img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/09.png" class="lozad post-image"src="/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/09.png"></p>
<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><p>在bin目录下执行 <strong>net start mongodb</strong>（cd /d d:\mongoDB\bin）</p>
<p>连接成功后执行<strong>mongo</strong></p>
<p>执行<strong>help</strong>查看命令</p>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>以下实例我们创建了数据库 runoob:</p>
<pre class="highlight"><span class="line">&gt; use runoob</span><br><span class="line">switched to db runoob</span><br><span class="line">&gt; db</span><br><span class="line">runoob</span><br><span class="line">&gt; </span><br></pre>

<p>如果你想查看所有数据库，可以使用 <strong>show dbs</strong> 命令：</p>
<pre class="highlight"><span class="line">&gt; show dbs</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br><span class="line">&gt; </span><br></pre>

<p>可以看到，我们刚创建的数据库 runoob 并不在数据库的列表中， 要显示它，我们需要向 runoob 数据库<strong>插入一些数据。</strong></p>
<pre class="highlight"><span class="line">&gt; db.runoob.insert(&#123;&quot;name&quot;:&quot;小明&quot;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line">&gt; show dbs	</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br><span class="line">runoob  0.000GB</span><br></pre>

<p>MongoDB 中默认的数据库为 test，如果你没有创建新的数据库，集合将存放在 test 数据库中。</p>
<h2 id="MongoDB-删除数据库"><a href="#MongoDB-删除数据库" class="headerlink" title="MongoDB 删除数据库"></a>MongoDB 删除数据库</h2><p>MongoDB 删除数据库的语法格式如下：</p>
<pre class="highlight"><span class="line">db.dropDatabase()</span><br></pre>

<p>删除当前数据库，默认为 test，你可以使用 db 命令查看当前数据库名。</p>
<p>首先，查看所有数据库：</p>
<pre class="highlight"><span class="line">&gt; show dbs</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br><span class="line">runoob  0.000GB</span><br></pre>

<p>接下来我们切换到数据库 runoob：</p>
<pre class="highlight"><span class="line">&gt; use runoob</span><br><span class="line">switched to db runoob</span><br><span class="line">&gt; </span><br></pre>

<p>执行删除命令：</p>
<pre class="highlight"><span class="line">&gt; db.dropDatabase()</span><br><span class="line">&#123; &quot;dropped&quot; : &quot;runoob&quot;, &quot;ok&quot; : 1 &#125;</span><br></pre>

<p>最后，我们再通过 show dbs 命令数据库是否删除成功：</p>
<pre class="highlight"><span class="line">&gt; show dbs</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br></pre>

<p>以下实例删除了 runoob 数据库中的集合 site：</p>
<pre class="highlight"><span class="line">&gt; use runoob</span><br><span class="line">switched to db runoob</span><br><span class="line">&gt; db.createCollection(&quot;runoob&quot;)     # 先创建集合，类似数据库中的表</span><br><span class="line">&gt; show tables</span><br><span class="line">runoob</span><br><span class="line">&gt; db.runoob.drop()</span><br><span class="line">true</span><br><span class="line">&gt; show tables</span><br><span class="line">&gt; </span><br></pre>

<p>在 test 数据库中创建 runoob 集合：</p>
<pre class="highlight"><span class="line">&gt; use test</span><br><span class="line">switched to db test</span><br><span class="line">&gt; db.createCollection(&quot;runoob&quot;)</span><br><span class="line">&#123; &quot;ok&quot; : 1 &#125;</span><br><span class="line">&gt;</span><br></pre>

<p>如果要查看已有集合，可以使用 <strong>show collections</strong> 或 <strong>show tables</strong> 命令：</p>
<pre class="highlight"><span class="line">&gt; show collections</span><br><span class="line">runoob</span><br><span class="line">system.indexes</span><br></pre>

<p>下面是带有几个关键参数的 createCollection() 的用法：（了解）</p>
<p>创建固定集合 mycol，整个集合空间大小 6142800 KB, 文档最大个数为 10000 个。</p>
<pre class="highlight"><span class="line">&gt; db.createCollection(&quot;mycol&quot;, &#123; capped : true, autoIndexId : true, size : </span><br><span class="line">   6142800, max : 10000 &#125; )</span><br><span class="line">&#123; &quot;ok&quot; : 1 &#125;</span><br><span class="line">&gt;</span><br></pre>

<p>在 MongoDB 中，你不需要创建集合。当你插入一些文档时，MongoDB 会自动创建集合。</p>
<pre class="highlight"><span class="line">&gt; db.mycol2.insert(&#123;&quot;name&quot; : &quot;小明&quot;&#125;)</span><br><span class="line">&gt; show collections</span><br><span class="line">mycol2</span><br><span class="line">...</span><br></pre>

<h2 id="删除集合"><a href="#删除集合" class="headerlink" title="删除集合"></a>删除集合</h2><p>在数据库 mydb 中，我们可以先通过 <strong>show collections</strong> 命令查看已存在的集合：</p>
<pre class="highlight"><span class="line">&gt;use mydb</span><br><span class="line">switched to db mydb</span><br><span class="line">&gt;show collections</span><br><span class="line">mycol</span><br><span class="line">mycol2</span><br><span class="line">system.indexes</span><br><span class="line">runoob</span><br><span class="line">&gt;</span><br></pre>

<p>接着删除集合 mycol2 :</p>
<pre class="highlight"><span class="line">&gt;db.mycol2.drop()</span><br><span class="line">true</span><br><span class="line">&gt;</span><br></pre>

<p>通过 show collections 再次查看数据库 mydb 中的集合：</p>
<pre class="highlight"><span class="line">&gt;show collections</span><br><span class="line">mycol</span><br><span class="line">system.indexes</span><br><span class="line">runoob</span><br><span class="line">&gt;</span><br></pre>

<p>从结果中可以看出 mycol2 集合已被删除。</p>
<h2 id="IDEA连接mongodb（查询和插入）"><a href="#IDEA连接mongodb（查询和插入）" class="headerlink" title="IDEA连接mongodb（查询和插入）"></a>IDEA连接mongodb（查询和插入）</h2><pre class="highlight"><span class="line">import com.mongodb.*;</span><br><span class="line">import com.mongodb.client.FindIterable;</span><br><span class="line">import com.mongodb.client.MongoCollection;</span><br><span class="line">import com.mongodb.client.MongoCursor;</span><br><span class="line">import com.mongodb.client.MongoDatabase;</span><br><span class="line">import org.bson.Document;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class mongoConnectionTest &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //这里的 &quot;localhost&quot; 表示连接的服务器地址，27017 为端口号。</span><br><span class="line">        // 可以省略 端口号 不写，系统将默认端口号为 27017</span><br><span class="line">        //MongoClient mongoClient = new MongoClient(&quot;localhost&quot;);</span><br><span class="line">        MongoClient mongoClient = new MongoClient(&quot;127.0.0.1&quot;);</span><br><span class="line"></span><br><span class="line">        //连接到数据库： &quot;test&quot; 表示数据库名</span><br><span class="line">        // 若指定的数据库不存在，mongoDB将会在你第一次插入文档时创建数据库。</span><br><span class="line">        MongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;test&quot;);</span><br><span class="line"></span><br><span class="line">        //获取集合</span><br><span class="line">        MongoCollection&lt;Document&gt; collection = mongoDatabase.getCollection(&quot;test&quot;);</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">        mongoDatabase.createCollection(&quot;javatest&quot;);</span><br><span class="line">        System.out.println(&quot;集合创建成功&quot;);</span><br><span class="line">        Document document = new Document(&quot;title&quot;, &quot;MongoDB&quot;).</span><br><span class="line">                append(&quot;description&quot;, &quot;database&quot;).</span><br><span class="line">                append(&quot;likes&quot;, 100).</span><br><span class="line">                append(&quot;by&quot;, &quot;Fly&quot;);</span><br><span class="line">        List&lt;Document&gt; documents = new ArrayList&lt;Document&gt;();</span><br><span class="line">        documents.add(document);</span><br><span class="line">        collection.insertMany(documents);</span><br><span class="line">        System.out.println(&quot;文档插入成功&quot;);</span><br><span class="line">        */</span><br><span class="line">    </span><br><span class="line">        //查找集合中的所有文档</span><br><span class="line">        FindIterable findIterable = collection.find();</span><br><span class="line">        MongoCursor cursor = findIterable.iterator();</span><br><span class="line">        //输出数据</span><br><span class="line">        while(cursor.hasNext())&#123;</span><br><span class="line">            System.out.println(cursor.next());</span><br><span class="line">        &#125;</span><br><span class="line">        mongoClient.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre>

<p>——————来自技术分享，刘雨竹</p>

  </div>
  <div>
  
  <div class="post-note note-warning copyright" style="margin-top: 42px">
    <p><span style="font-weight: bold;">作者：</span><a target="_blank" rel="nofollow noopener noreferrer" href="/about">刘一峰</a></p>
    <p><span style="font-weight: bold;">文章链接：</span><a target="_blank" rel="nofollow noopener noreferrer" href="http://www.codekop.com/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/">http://www.codekop.com/2019/10/15/MongoDB%E9%85%8D%E7%BD%AE/</a></p>
    <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
  </div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/2019/10/15/Elasticsearch%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">上一篇</div>
        
        <div class="nav-title">Elasticsearch环境搭建 </div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/2019/10/15/MongoDB%E5%AE%9E%E7%8E%B0%E8%AF%84%E8%AE%BA/" class="nav-link">
      <div>
        <div class="nav-label">下一篇</div>
        
        <div class="nav-title">MongoDB实现评论 </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MongoDB%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-text">MongoDB安装及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mongo%E5%AE%89%E8%A3%85"><span class="toc-text">mongo安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mongo%E9%85%8D%E7%BD%AE"><span class="toc-text">mongo配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%B8%B8%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4"><span class="toc-text">正常执行步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF"><span class="toc-text">错误</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF-5"><span class="toc-text">错误 5</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF-1058"><span class="toc-text">错误 1058</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E9%94%99%E8%AF%AF"><span class="toc-text">其它错误</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-text">连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">MongoDB 删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E9%9B%86%E5%90%88"><span class="toc-text">删除集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IDEA%E8%BF%9E%E6%8E%A5mongodb%EF%BC%88%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%8F%92%E5%85%A5%EF%BC%89"><span class="toc-text">IDEA连接mongodb（查询和插入）</span></a></li></ol></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
<img src="/img/head2.png" class="author-img">

<p class="author-name">刘一峰</p>
<p class="author-description">只争朝夕 不负韶华</p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>55</span>
    <span>文章</span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>0</span>
    <span>分类</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>28</span>
    <span>标签</span>
  </a>
</div>

<div class="author-card-society">
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://github.com/364825466">
        <i class="iconfont icon-github society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://github.com/theme-kaze/hexo-theme-kaze">
        <i class="iconfont icon-wechat society-icon"></i>
      </a>
    </div>
  
</div>

              </div>
               <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MongoDB%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-text">MongoDB安装及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mongo%E5%AE%89%E8%A3%85"><span class="toc-text">mongo安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mongo%E9%85%8D%E7%BD%AE"><span class="toc-text">mongo配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%B8%B8%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4"><span class="toc-text">正常执行步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF"><span class="toc-text">错误</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF-5"><span class="toc-text">错误 5</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF-1058"><span class="toc-text">错误 1058</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E9%94%99%E8%AF%AF"><span class="toc-text">其它错误</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-text">连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">MongoDB 删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E9%9B%86%E5%90%88"><span class="toc-text">删除集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IDEA%E8%BF%9E%E6%8E%A5mongodb%EF%BC%88%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%8F%92%E5%85%A5%EF%BC%89"><span class="toc-text">IDEA连接mongodb（查询和插入）</span></a></li></ol></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>分类</div>
  <div class="categories-list">
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>热门标签</div>
  <div class="tags-list">
    
    <a href="/tags/MySQL/" title="MySQL"><div class="tags-list-item">MySQL</div></a>
    
    <a href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/" title="技术分享"><div class="tags-list-item">技术分享</div></a>
    
    <a href="/tags/bug/" title="bug"><div class="tags-list-item">bug</div></a>
    
    <a href="/tags/SpringBoot/" title="SpringBoot"><div class="tags-list-item">SpringBoot</div></a>
    
    <a href="/tags/Java%E5%9F%BA%E7%A1%80/" title="Java基础"><div class="tags-list-item">Java基础</div></a>
    
    <a href="/tags/hexo/" title="hexo"><div class="tags-list-item">hexo</div></a>
    
    <a href="/tags/SpringCloud/" title="SpringCloud"><div class="tags-list-item">SpringCloud</div></a>
    
    <a href="/tags/es/" title="es"><div class="tags-list-item">es</div></a>
    
    <a href="/tags/course/" title="course"><div class="tags-list-item">course</div></a>
    
    <a href="/tags/SpringMVC/" title="SpringMVC"><div class="tags-list-item">SpringMVC</div></a>
    
    <a href="/tags/MongoDB/" title="MongoDB"><div class="tags-list-item">MongoDB</div></a>
    
    <a href="/tags/git/" title="git"><div class="tags-list-item">git</div></a>
    
    <a href="/tags/%E6%9D%82%E8%B0%88/" title="杂谈"><div class="tags-list-item">杂谈</div></a>
    
    <a href="/tags/excel/" title="excel"><div class="tags-list-item">excel</div></a>
    
    <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="多线程"><div class="tags-list-item">多线程</div></a>
    
    <a href="/tags/%E7%94%B5%E8%84%91/" title="电脑"><div class="tags-list-item">电脑</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MongoDB%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-text">MongoDB安装及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mongo%E5%AE%89%E8%A3%85"><span class="toc-text">mongo安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mongo%E9%85%8D%E7%BD%AE"><span class="toc-text">mongo配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%B8%B8%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4"><span class="toc-text">正常执行步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF"><span class="toc-text">错误</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF-5"><span class="toc-text">错误 5</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF-1058"><span class="toc-text">错误 1058</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E9%94%99%E8%AF%AF"><span class="toc-text">其它错误</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-text">连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">MongoDB 删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E9%9B%86%E5%90%88"><span class="toc-text">删除集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IDEA%E8%BF%9E%E6%8E%A5mongodb%EF%BC%88%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%8F%92%E5%85%A5%EF%BC%89"><span class="toc-text">IDEA连接mongodb（查询和插入）</span></a></li></ol></li></ol>
  </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>最近文章</div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-06-04</div>
        <a href="/2021/06/04/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/"><div class="recent-posts-item-content">多线程基础</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-22</div>
        <a href="/2021/04/22/PDMan%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E6%A8%A1%E5%B7%A5%E5%85%B7/"><div class="recent-posts-item-content">PDMan数据库建模工具</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-02-19</div>
        <a href="/2021/02/19/Spring%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E6%80%A7/"><div class="recent-posts-item-content">Spring事务传播性</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2020-10-10</div>
        <a href="/2020/10/10/Nginx%E5%88%9D%E8%AF%86/"><div class="recent-posts-item-content">Nginx初识</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>Copyright ©
          
          2020 -
          
          2021
        </span>
        &nbsp;
        <a href="/" class="footer-link">CodeKop的博客 </a>
      </div>
    </div>

    
    <div class="footer-dsc">
      
      Powered by
      <a href="https://hexo.io/" class="footer-link" target="_blank" rel="nofollow noopener noreferrer">&nbsp;Hexo </a>
      
      
      <span>&nbsp;|&nbsp;</span>
      
      
      Theme -
      <a href="https://github.com/theme-kaze" class="footer-link" target="_blank"
        rel="nofollow noopener noreferrer">&nbsp;Kaze</a>
      
    </div>
    
    
    
    
      <div class="footer-dsc">
        
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
        
        
        <span>&nbsp;|&nbsp;</span>
        
        
        本站总访客数<span id="busuanzi_value_site_uv"></span>次
        
      </div>
      
    
</footer> <a role="button" id="scrollbutton" class="basebutton"  aria-label="回到顶部">
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton" aria-label="控制中心">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget" aria-label="夜色模式">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a role="button" id="searchbutton" class="basebutton searchwidget" aria-label="搜索">
  <i class="iconfont icon-search button-icon"></i>
</a>    <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
   <script src="/js/main.js"></script> 
    <script>
      loadScript('/js/lib/busuanzi.min.js')
    </script>
     
    <script>
      var addLazyload = function () {
        var observer = lozad('.lozad', {
          load: function (el) {
            el.srcset = el.getAttribute('data-src')
          },
          loaded: function (el) {
            el.classList.add('loaded')
          },
        })
        observer.observe()
      }
    </script>
    <script>
      loadScript('/js/lib/lozad.min.js', addLazyload)
    </script>
     
    
    <script>
      setTimeout(() => {
        localSearch('search.json')}, 0)
    </script>
    
  </body>
</html>
